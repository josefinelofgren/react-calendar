(this["webpackJsonpcalender-todo"]=this["webpackJsonpcalender-todo"]||[]).push([[0],{78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var s=a(3),n=a.n(s),c=a(26),r=a.n(c),o=a(33),i=a(34),l=a(40),d=a(39),j=a(11),u=a(12),b=a(32);a(63),a(67);b.a.initializeApp({apiKey:"AIzaSyA9-907emHXJmKhtrX-ccHSaFqQQ1pGmKI",authDomain:"calender-todo-374ad.firebaseapp.com",databaseURL:"https://calender-todo-374ad-default-rtdb.firebaseio.com/",projectId:"calender-todo-374ad",storageBucket:"calender-todo-374ad.appspot.com",messagingSenderId:"369571814179",appId:"1:369571814179:web:b68645c23680bb71faca96",measurementId:"G-Q8CJ9ZF8WH"});new b.a.auth.GoogleAuthProvider,b.a.auth();var h=b.a,m=a(14),O=a.n(m),f=(a(46),a(22)),x=a(85),v=a(57),k=a(10),p=a(27),g=a(58),N=a(30),D=a(2);var w=function(e){var t=e.user;return Object(D.jsx)(g.a.Brand,{children:Object(D.jsxs)(j.b,{className:t?"fw-bold text-light navbar-brand-sidenav brand":"fw-bold text-dark brand",to:"/",children:[Object(D.jsx)(N.a,{className:"text-color"})," ","Calendar-todo"]})})};var S=function(e){var t=e.sidenav,a=e.showSidenav;return Object(D.jsx)(j.b,{to:"#",className:t?"menu-btn is-active":"menu-btn",onClick:a,children:Object(D.jsx)("div",{className:t?"menu-burger is-active":"menu-burger"})})};var y=function(e){var t=e.sidenav,a=e.showSidenav,n=e.user,c=e.logOutUser,r=e.howManyTasks,o=Object(u.f)(),i=Object(s.useState)(null),l=Object(k.a)(i,2),d=l[0],b=l[1];return Object(s.useEffect)((function(){b(0!==r)}),[r]),Object(D.jsx)(g.a,{bg:"transparent",expand:"lg",className:n?"shadow-5-strong border-bottom-thin":"",children:Object(D.jsxs)(f.a,{fluid:!0,className:"nav",children:[!n&&Object(D.jsx)(w,{}),n&&Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(S,{sidenav:t,showSidenav:a})}),Object(D.jsxs)("div",{className:"nav-link",children:[!n&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(j.b,{className:"link text-secondary no-user",to:"/users/login",children:"Logga in"}),Object(D.jsx)(j.b,{className:"link text-secondary no-user",to:"/users/signup",children:"Skapa konto"})]}),n&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(j.b,{className:"link text-secondary user",onClick:function(e){return c(e,o)},to:"/",children:"Logga ut"}),Object(D.jsxs)(j.b,{className:"link text-secondary nav-icon user",to:"#",children:[Object(D.jsx)(p.c,{}),Object(D.jsx)("div",{className:d?"notification-bubble text-white fw-bold is-active":"notification-bubble text-white fw-bold",children:r})]})]})]})]})})},C=a(20);var I=function(e){var t=e.user,a=Object(u.f)();return null!==t?a.push("/app/calendar"):a.push("/"),Object(D.jsx)(f.a,{children:Object(D.jsxs)("div",{className:"textbox startpage",children:[Object(D.jsx)("h1",{className:"fw-bold display-3",children:"Organisera livet med Calendar-todo"}),Object(D.jsx)("br",{}),Object(D.jsx)(C.a,{className:"fw-bold bg-color border-color",onClick:function(){return a.push("/users/signup")},children:"Kom ig\xe5ng"}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsxs)("p",{children:["Har du redan ett konto?",Object(D.jsx)(j.b,{className:"text-color",to:"/users/login",children:" Logga in"})]})]})})};var M=function(e){for(var t=e.clone().startOf("month").startOf("week"),a=e.clone().endOf("month").endOf("week"),s=t.clone().subtract(1,"day"),n=[];s.isBefore(a,"day");)n.push(Array(7).fill(0).map((function(){return s.add(1,"day").clone()})));return n};function Y(e,t){return function(e){return e.isSame(new Date,"day")}(e)?"today":function(e){return e.isBefore(new Date,"day")}(e)?"before":""}var T=function(e){var t=e.value,a=e.setValue;return Object(D.jsx)("div",{className:"calendar-header",children:Object(D.jsxs)("div",{className:"calendar-header-content fw-bold",children:[Object(D.jsx)("div",{className:"calendar-icon inline-block",onClick:function(){return a(t.clone().subtract(1,"month"))},children:Object(D.jsx)(p.a,{})}),Object(D.jsxs)("div",{className:"calendar-month inline-block",children:[t.format("MMMM")," ",t.format("YYYY")]}),Object(D.jsx)("div",{className:"calendar-icon inline-block",onClick:function(){return a(t.clone().add(1,"month"))},children:Object(D.jsx)(p.b,{})})]})})},L=a(86);var F=function(e){var t=e.day,a=e.value,n=e.addTask,c=Object(s.useState)(""),r=Object(k.a)(c,2),o=r[0],i=r[1],l=Object(s.useState)(""),d=Object(k.a)(l,2),j=d[0],u=d[1],b=Object(s.useState)(""),h=Object(k.a)(b,2),m=h[0],O=h[1],f=Object(s.useState)(""),x=Object(k.a)(f,2),v=x[0],p=x[1];return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(L.a,{className:"".concat(function(e,t){return function(e,t){return t.isSame(e,"day")}(e,t)?"selected":""}(t,a)," input-task"),onSubmit:function(e){return function(e){e.preventDefault(),n(o,j,m,v),i(""),u(""),O(""),p("")}(e)},children:[Object(D.jsx)(L.a.Control,{required:!0,className:"calendar-input",type:"text",placeholder:"L\xe4gg till uppgift..",id:"".concat(t.format("YYYY/MM/DD")),name:"".concat(t.format("DD MMM")),value:o,onChange:function(e){return function(e){e.preventDefault(),i(e.target.value),u(e.target.id),O(e.target.name),p(!1)}(e)}}),Object(D.jsx)(C.a,{type:"submit",hidden:!0,children:"+"})]})})},A=a(31);var E=function(e){var t=e.taskChecked,a=e.taskID,s=e.taskShortDate,n=e.taskName,c=e.userID;return Object(D.jsxs)("div",{className:t?"sidenav-task checked":"sidenav-task",children:[Object(D.jsx)("div",{className:t?"capitalize-first task-name inline-block checked":"capitalize-first task-name inline-block",children:n}),Object(D.jsx)(A.a,{onClick:function(e){return function(e,t,a){e.preventDefault();var s=h.database().ref("/app/calendar/".concat(c,"/").concat(t,"/taskChecked"));(!1===a||!0===a)&&s.set(!a)}(e,a,t)},className:t?"task-icon checked check":"task-icon check"}),Object(D.jsx)(A.d,{onClick:function(e){return function(e,t){e.preventDefault(),h.database().ref("app/calendar/".concat(c,"/").concat(t)).remove()}(e,a)},className:"task-icon trash"}),Object(D.jsx)("div",{className:"task-date",children:s})]},a)};var P=function(e){var t=e.addTask,a=e.tasks,n=e.userID;O.a.locale("sv");var c=Object(s.useState)([]),r=Object(k.a)(c,2),o=r[0],i=r[1],l=Object(s.useState)(O()()),d=Object(k.a)(l,2),j=d[0],u=d[1],b=Object(s.useState)([]),h=Object(k.a)(b,2),m=h[0],x=h[1],v=Object(s.useState)(!0),p=Object(k.a)(v,2),g=(p[0],p[1]),N=Object(s.useState)(""),w=Object(k.a)(N,2),S=w[0],y=(w[1],Object(s.useState)(null)),C=Object(k.a)(y,2),I=(C[0],C[1]);return Object(s.useEffect)((function(){return i(M(j)),fetch("http://sholiday.faboul.se/dagar/v2.1/".concat(j.format("YYYY"))).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){g(!1),x(e.dagar)})).catch((function(e){console.error("error",e),I(e)}))}),[j,S]),console.log(m),Object(D.jsxs)(f.a,{fluid:!0,className:"calendar-container",children:[Object(D.jsx)(T,{value:j,setValue:u}),Object(D.jsxs)(f.a,{fluid:!0,children:[Object(D.jsx)("div",{className:"row calendar-weekday border-right-thin border-left-thin border-bottom-thin border-top-thin",children:["M\xe5n","Tis","Ons","Tors","Fre","L\xf6r","S\xf6n"].map((function(e,t){return Object(D.jsx)("div",{className:"col-sm weekday-day fw-bold",children:e},t)}))}),o.map((function(e,s){return Object(D.jsx)("div",{className:"row calendar-week border-left-bold border-bottom-bold",children:e.map((function(e){return Object(D.jsxs)("div",{id:"".concat(e.format("YYYY/MM/DD")),className:"".concat(Y(e)," day col-sm calendar-day border-right-bold"),onClick:function(t){return function(e){u(e)}(e)},children:[Object(D.jsx)("div",{className:"date fw-bold",children:e.format("D").toString()}),m.map((function(t){if(O()(t.datum).isSame(e))return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"date holiday ".concat(t["r\xf6d dag"]),children:t.helgdag},e)})})),Object(D.jsx)("div",{className:"calendar-tasks",children:a&&a.map((function(t){return O()(t.taskDate).isSame(e)?Object(D.jsx)(E,{userID:n,taskChecked:t.taskChecked,taskName:t.taskName,taskID:t.taskID,taskShortDate:t.taskShortDate},t.taskID):null}))}),Object(D.jsx)(F,{day:e,value:j,addTask:t})]},"".concat(e.format("YYYY/MM/DD")))}))},s)}))]})]})},U=a(38),q=a(37),B=a(36),H=a(25),G=a(23);var K=function(e){var t=e.handleSubmit,a=e.email,s=e.setEmail,n=e.password,c=e.setPassword;return Object(D.jsx)(f.a,{children:Object(D.jsxs)("form",{onSubmit:function(e){return t(e)},children:[Object(D.jsxs)(H.a,{children:[Object(D.jsxs)("div",{className:"form-box",children:[Object(D.jsx)(j.b,{className:"form-box-content is-active",to:"/users/login",children:Object(D.jsxs)("div",{className:"fw-bold",children:[Object(D.jsx)(N.b,{className:"form-icon"}),Object(D.jsx)("br",{}),"Logga in"]})}),Object(D.jsx)("div",{className:"form-box-content transparent"}),Object(D.jsx)(j.b,{className:"form-box-content",to:"/users/signup",children:Object(D.jsxs)("div",{className:"fw-bold",children:[Object(D.jsx)(B.a,{className:"form-icon"}),Object(D.jsx)("br",{}),"Skapa konto"]})})]}),Object(D.jsx)(G.a,{required:!0,type:"text",id:"email",placeholder:"E-post",name:"email",value:a,onChange:function(e){return s(e.target.value)}}),Object(D.jsx)(G.a,{required:!0,type:"text",id:"password",placeholder:"L\xf6senord",name:"password",value:n,onChange:function(e){return c(e.target.value)}}),Object(D.jsx)(C.a,{type:"submit",className:"fw-bold",children:"Logga in"}),Object(D.jsx)("p",{className:"form-or",children:Object(D.jsx)("span",{children:"eller"})}),Object(D.jsxs)(C.a,{className:"fw-bold facebook",children:[Object(D.jsx)(q.a,{className:"btn-icon"})," ","Logga in med Facebook"]}),Object(D.jsxs)(C.a,{className:"fw-bold google",children:[Object(D.jsx)(U.a,{className:"btn-cion"})," ","Logga in med Google"]})]}),Object(D.jsxs)("p",{children:["Har du inget konto \xe4n?",Object(D.jsx)(j.b,{to:"/users/signup",className:"text-color",children:" Skapa konto"})]})]})})};var z=function(){var e=Object(u.f)(),t=Object(s.useState)(""),a=Object(k.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)(""),o=Object(k.a)(r,2),i=o[0],l=o[1];return Object(D.jsx)(K,{email:n,setEmail:c,password:i,setPassword:l,handleSubmit:function(t){t.preventDefault();var a={email:n,password:i};h.auth().signInWithEmailAndPassword(a.email,a.password).then((function(){e.push("/app/calendar")}))}})},J=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.theMessage;return Object(D.jsx)("div",{className:"col-12 alert alert-warning error-message",children:e})}}]),a}(s.Component);var Q=function(e){var t=e.handleSubmit,a=e.email,s=e.errorMessage,n=e.setEmail,c=e.passOne,r=e.setPassOne,o=e.passTwo,i=e.setPassTwo;return Object(D.jsx)(f.a,{children:Object(D.jsxs)("form",{onSubmit:function(e){return t(e)},children:[Object(D.jsxs)(H.a,{children:[Object(D.jsxs)("div",{className:"form-box",children:[Object(D.jsx)(j.b,{className:"form-box-content",to:"/users/login",children:Object(D.jsxs)("div",{className:"fw-bold",children:[Object(D.jsx)(N.b,{className:"form-icon"}),Object(D.jsx)("br",{}),"Logga in"]})}),Object(D.jsx)("div",{className:"form-box-content transparent"}),Object(D.jsx)(j.b,{className:"form-box-content is-active",to:"/users/signup",children:Object(D.jsxs)("div",{className:"fw-bold",children:[Object(D.jsx)(B.a,{className:"form-icon"}),Object(D.jsx)("br",{}),"Skapa konto"]})})]}),Object(D.jsxs)(C.a,{className:"fw-bold facebook",children:[Object(D.jsx)(q.a,{className:"btn-icon"})," ","Forts\xe4tt med Facebook"]}),Object(D.jsxs)(C.a,{className:"fw-bold google",children:[Object(D.jsx)(U.a,{className:"btn-cion"})," ","Forts\xe4tt med Google"]}),Object(D.jsx)("p",{className:"form-or",children:Object(D.jsx)("span",{children:"eller"})}),Object(D.jsx)(G.a,{required:!0,type:"text",id:"email",placeholder:"E-post",name:"email",value:a,onChange:function(e){return n(e.target.value)}}),Object(D.jsx)(G.a,{required:!0,type:"text",id:"passOne",placeholder:"L\xf6senord",name:"passOne",value:c,onChange:function(e){return r(e.target.value)}}),Object(D.jsx)(G.a,{required:!0,type:"text",id:"passTwo",placeholder:"Upprepa l\xf6senord",name:"passTwo",value:o,onChange:function(e){return i(e.target.value)}}),null!==s?Object(D.jsx)(J,{theMessage:s}):null,Object(D.jsx)(C.a,{type:"submit",className:"fw-bold",children:"Registrera"})]}),Object(D.jsxs)("p",{children:["Har du redan ett konto?",Object(D.jsx)(j.b,{to:"/users/login",className:"text-color",children:" Logga in"})]})]})})};var W=function(e){var t=e.registerUser,a=Object(u.f)(),n=Object(s.useState)(""),c=Object(k.a)(n,2),r=c[0],o=c[1],i=Object(s.useState)(""),l=Object(k.a)(i,2),d=l[0],j=l[1],b=Object(s.useState)(""),m=Object(k.a)(b,2),O=m[0],f=m[1],x=Object(s.useState)(null),v=Object(k.a)(x,2),p=v[0],g=v[1];return Object(s.useEffect)((function(){d?d.length<6?g("L\xf6senordet b\xf6r inneh\xe5lla minst 6 tecken."):g(O&&d!==O?"L\xf6senorden matchar inte.":null):g(null)}),[d,O]),Object(D.jsx)(Q,{email:r,errorMessage:p,setEmail:o,passOne:d,setPassOne:j,passTwo:O,setPassTwo:f,handleSubmit:function(e){e.preventDefault();var s={email:r,password:d};h.auth().createUserWithEmailAndPassword(s.email,s.password).then((function(){console.log("anv\xe4ndare registrerad"),t(a)})).catch((function(e){"The email address is already in use by another account."===e.message?(console.log(e.message),g("E-postadressen anv\xe4nds redan av en annan anv\xe4ndare.")):g(null)}))}})};var R=function(e,t,a,s){if(void 0!==t)return e.preventDefault(),void a(!s)};var V=function(e){var t=e.sidenav,a=e.tasks,n=e.userID,c=e.user,r=Object(s.useState)(!0),o=Object(k.a)(r,2),i=o[0],l=o[1];O.a.locale("sv");var d,j,u,b=O()().format("YYYYMMDD"),h=O()().format("DD MMM");if(void 0!==a){var m=a.sort((function(e,t){return new O.a(e.taskDate).format("YYYYMMDD")-new O.a(t.taskDate).format("YYYYMMDD")}));j=m.map((function(e,t){return O()(e.taskDate).isBefore(b)?Object(D.jsx)(E,{userID:n,taskChecked:e.taskChecked,taskName:e.taskName,taskID:e.taskID,taskShortDate:e.taskShortDate},t):null})),d=m.map((function(e,t){return O()(e.taskDate).isSame(b)?Object(D.jsx)(E,{userID:n,taskChecked:e.taskChecked,taskName:e.taskName,taskID:e.taskID,taskShortDate:e.taskShortDate},t):null})),u=m.map((function(e,t){return O()(e.taskDate).isAfter(b)?Object(D.jsx)(E,{userID:n,taskChecked:e.taskChecked,taskName:e.taskName,taskID:e.taskID,taskShortDate:e.taskShortDate},t):null}))}return Object(D.jsxs)("div",{className:t?"sidenav":"sidenav is-active",children:[Object(D.jsx)(g.a,{children:Object(D.jsx)(f.a,{fluid:!0,children:Object(D.jsx)(w,{user:c})})}),Object(D.jsxs)("ul",{className:"sidenav-alternatives",children:[Object(D.jsxs)("p",{className:"fw-bold",children:[Object(D.jsx)(A.b,{className:"sidenav-icon"})," Hem"]}),Object(D.jsxs)("p",{className:"fw-bold",children:[Object(D.jsx)(A.c,{className:"sidenav-icon"})," Inkorg"]})]}),Object(D.jsxs)("div",{className:"dropdown",children:[Object(D.jsx)("div",{className:"fw-bold dropdown-category",children:Object(D.jsxs)("div",{className:"nav-link-dropdown",onClick:function(e){return R(e,a,l,i)},children:[Object(D.jsx)(p.c,{className:"sidenav-icon"}),Object(D.jsx)("p",{className:"inline-block",children:"Mina uppgifter"}),Object(D.jsx)(p.b,{className:i?"sidenav-icon arrow inline-block rotate":"arrow inline-block"})]})}),Object(D.jsx)("ul",{className:i?"dropdown-content hide":"dropdown-content",children:Object(D.jsxs)("div",{className:"list-group list-group-flush",children:[Object(D.jsxs)("div",{className:"sidenav-category previous",children:[Object(D.jsx)("div",{className:"sidenav-title border-bottom-dark fw-bold",children:"F\xf6rfallna"}),Object(D.jsx)("div",{className:"sidenav-tasks",children:j})]}),Object(D.jsxs)("div",{className:"sidenav-category",children:[Object(D.jsxs)("div",{className:"sidenav-title border-bottom-dark fw-bold today",children:[h," ","\u2022"," ","Idag"]}),Object(D.jsx)("div",{className:"sidenav-tasks",children:d})]}),Object(D.jsxs)("div",{className:"sidenav-category",children:[Object(D.jsx)("div",{className:"sidenav-title border-bottom-dark fw-bold",children:"Kommande"}),Object(D.jsx)("div",{className:"sidenav-tasks",children:u})]})]})})]})]})};var X=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).showSidenav=function(){e.setState({sidenav:!e.state.sidenav})},e.addTask=function(t,a,s,n){h.database().ref("app/calendar/".concat(e.state.user.uid)).push({taskName:t,taskDate:a,taskShortDate:s,taskChecked:n})},e.registerUser=function(t){h.auth().onAuthStateChanged((function(a){e.setState({user:a,userID:a.uid}),t.push("/app/calendar")}))},e.logOutUser=function(t,a){t.preventDefault(),e.setState({user:null,userID:null}),h.auth().signOut().then((function(){console.log("utloggad"),console.log(e.state.user),a.push("/")}))},e.state={user:null,userID:null,sidenav:!0,loading:!0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;new Promise((function(e){return setTimeout((function(){return e()}),2500)})).then((function(){return e.setState({loading:!1})})),h.auth().onAuthStateChanged((function(t){t?(e.setState({user:t,userID:t.uid}),h.database().ref("app/calendar/"+t.uid).on("value",(function(t){var a=t.val(),s=[],n=[];for(var c in a)s.push({taskID:c,taskName:a[c].taskName,taskDate:a[c].taskDate,taskShortDate:a[c].taskShortDate,taskChecked:a[c].taskChecked}),!1===a[c].taskChecked&&n.push({taskChecked:a[c].taskChecked});e.setState({tasks:s,howManyTasks:n.length})}))):e.setState({user:null})}))}},{key:"render",value:function(){return this.state.loading?null:Object(D.jsx)("div",{className:"App",children:Object(D.jsx)(j.a,{children:Object(D.jsx)(f.a,{fluid:!0,children:Object(D.jsxs)(x.a,{children:[this.state.user&&Object(D.jsx)(v.a,{xs:this.state.sidenav?"3":"0",className:this.state.sidenav?"sidenav-wrap is-active border-right":"sidenav-wrap not-active",children:Object(D.jsx)(V,{user:this.state.user,tasks:this.state.tasks,userID:this.state.userID,todaysDate:this.state.todaysDate,todaysDateDayAndMonth:this.state.todaysDateDayAndMonth,toggleDropDown:this.toggleDropDown})}),Object(D.jsxs)(v.a,{children:[Object(D.jsx)(y,{path:"/:app?/:app2?",user:this.state.user,logOutUser:this.logOutUser,sidenav:this.state.sidenav,showSidenav:this.showSidenav,howManyTasks:this.state.howManyTasks}),Object(D.jsxs)(u.c,{children:[Object(D.jsx)(u.a,{exact:!0,path:"/",children:Object(D.jsx)(I,{user:this.state.user})}),Object(D.jsx)(u.a,{path:"/app/calendar",children:Object(D.jsx)(P,{addTask:this.addTask,tasks:this.state.tasks,userID:this.state.userID})}),Object(D.jsx)(u.a,{path:"/users/login",children:Object(D.jsx)(z,{})}),Object(D.jsx)(u.a,{path:"/users/signup",children:Object(D.jsx)(W,{registerUser:this.registerUser})})]})]})]})})})})}}]),a}(s.Component),Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,87)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};a(78),a(79),a(80),a(81),a(82);r.a.render(Object(D.jsx)(n.a.StrictMode,{children:Object(D.jsx)(X,{})}),document.getElementById("root")),Z()}},[[83,1,2]]]);
//# sourceMappingURL=main.84c8a8ec.chunk.js.map